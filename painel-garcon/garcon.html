<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GestioMax Sistemas Gar√ßom</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- TOPO -->
  <header class="topo">
    <div class="topo-left">
      <h2>Pedidos: Gar√ßom</h2>
      <span id="nomeGarcom">Bem-vindo</span>
    </div>
    <div class="topo-right">
      <button id="btnLogout" onclick="deslogar()">Sair</button>
    </div>
  </header>

  <!-- CONTE√öDO PRINCIPAL -->
  <main class="container">

    <!-- NOTIFICA√á√ÉO MESA N√ÉO ATENDIDA -->
    <div id="notificacao" class="notificacao hidden">
      ‚ö†Ô∏è Existem mesas <strong>aguardando atendimento</strong> no momento.
    </div>

    <div class="painel-lateral">

      <!-- CAMPO MESA -->
      <div class="campo">
        <label for="mesa">Mesa Ocupada</label>
        <select id="mesa">
          <option value="">Carregando mesas...</option>
        </select>
      </div>

      <!-- MESAS POR PRIORIDADE -->
        <div class="campo prioridade-mesas">
        <h3>Mesas Priorit√°rias</h3>
        <ul id="listaPrioridadeMesas">
         <!-- Lista de mesas em ordem de prioridade ser√° preenchida pelo JS -->
         </ul>
        </div>
      <!-- STATUS DA MESA -->
      <div id="statusMesa" class="status-mesa">
        <span id="iconeStatus" class="status-icone"></span>
        <div>
          <p id="textoStatus" class="status-texto">
            Selecione uma mesa para ver o status
          </p>
        </div>
      </div>

    
      <!-- PEDIDOS EM ANDAMENTO -->
      <div class="campo">
        <h3>Pedidos em Andamento</h3>
        <div id="pedidosAndamento" class="lista-pedidos">
          <!-- Lista de pedidos enviados -->
        </div>
      </div>

      <!-- ESTAT√çSTICAS R√ÅPIDAS -->
     <div class="campo estatisticas" id="campoEstatisticas">

  <h3 class="titulo-estatisticas">
    Estat√≠sticas

    <span id="iconeEstatisticas" class="icone-seta">
      <!-- seta para baixo -->
      <svg viewBox="0 0 24 24" width="18" height="18">
        <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/>
      </svg>
    </span>
  </h3>

  <div id="conteudoEstatisticas" class="fechado">
    <p>Mesas atendidas: <span id="mesasAtendidas">0</span></p>
    <p>Pedidos do dia: <span id="pedidosDia">0</span></p>
    <p>Total faturado: <span id="totalFaturado">R$ 0,00</span></p>
    <p>Pedidos pendentes:
      <span id="pedidosPendentes" style="color:red; font-weight:bold;">0</span>
    </p>
  </div>

</div>



<style>

  .titulo-estatisticas {
  display: flex;
  align-items: center;
  justify-content: space-between;
  user-select: none;
}

.icone-seta {
  display: flex;
  align-items: center;
  transition: transform 0.3s ease;
}

/* gira para cima quando abrir */
.icone-seta.aberto {
  transform: rotate(180deg);
}

#conteudoEstatisticas {
  overflow: hidden;
  max-height: 500px;
  opacity: 1;
  transition: max-height 0.4s ease, opacity 0.3s ease;
}

#conteudoEstatisticas.fechado {
  max-height: 0;
  opacity: 0;
}

#campoEstatisticas {
  cursor: pointer;
}

  #conteudoEstatisticas {
  overflow: hidden;
  max-height: 500px; /* altura suficiente para o conte√∫do */
  opacity: 1;
  transition: max-height 0.4s ease, opacity 0.3s ease;
}

/* quando estiver fechado */
#conteudoEstatisticas.fechado {
  max-height: 0;
  opacity: 0;
}

</style>

    </div>

  <!-- MENU LATERAL -->
<aside id="menuLateral" class="menu-lateral">
  <div class="menu-topo">
    <h2>GestioMax</h2>
    <button id="btnFecharMenu" class="btn-fechar">&times;</button>
  </div>

  <ul class="menu-itens">
    <li>
      <button class="menu-item expandivel">
        <span class="icon">ü™ë</span> Mesas
        <span class="seta">‚ñæ</span>
      </button>
      <ul class="submenu">
        <li><button id="btnAbrirAdicionarPedido" class="submenu-item">Adicionar Pedido</button></li>
        <li><button class="submenu-item">Ver Comandas</button></li>
      </ul>
    </li>
    <li>
      <button class="menu-item"><span class="icon">üìä</span> Relat√≥rios</button>
    </li>
    <li>
      <button class="menu-item"><span class="icon">‚öôÔ∏è</span> Configura√ß√µes</button>
    </li>
  </ul>

  <!-- VERS√ÉO NO FINAL -->
  <div class="menu-versao">Version 1.1</div>
</aside>


<!-- BOT√ÉO HAMBURGUER -->
<button id="btnAbrirMenu" class="btn-hamburguer">‚ò∞</button>




    <div class="painel-central">

      <!-- CAMPO DE PESQUISA -->
      <div class="campo">
        <label for="pesquisa">Pesquisar Produto</label>
        <input type="text" id="pesquisa" placeholder="Digite o nome do produto..." />
      </div>

      <!-- FILTRO POR CATEGORIA -->
      <div class="campo">
        <label for="filtroCategoria">Filtrar Categoria</label>
        <select id="filtroCategoria">
          <option value="todos">Todas</option>
        </select>
      </div>

      <!-- LISTA DE PRODUTOS -->
      <div class="campo">
        <label for="listaProdutos">Produtos</label>
        <div id="listaProdutos" class="lista-produtos">
          <!-- Produtos com checkbox -->
        </div>
      </div>

      <!-- OBSERVA√á√ÉO POR PRODUTO -->
      <div class="campo">
        <label for="observacao">Observa√ß√£o do Pedido</label>
        <input type="text" id="observacao" placeholder="Ex: sem cebola, bem passado..." />
      </div>

      <!-- VALOR TOTAL -->
      <div class="campo totalPedido">
        <label>Total do Pedido</label>
        <div id="valorTotal">R$ 0,00</div>
      </div>

      <!-- BOT√ïES DE A√á√ÉO -->
      <div class="campo botoes">
      <button class="btn-enviar">Enviar Pedido üöÄ</button>
  
      </div>

      <!-- PROMO√á√ïES / SUGEST√ïES DO DIA -->
      <div class="campo promocoes">
        <h3>Promo√ß√µes do Dia</h3>
        <ul id="listaPromocoes">
          <!-- promo√ß√µes v√™m do banco -->
        </ul>
      </div>

      <div class="incentivo-promocao">
        üí° Ofere√ßa essas promo√ß√µes ao cliente!  
        <strong>Voc√™ ganha comiss√£o por cada venda realizada.</strong>
      </div>
    </div>

  </main>

  
  <!-- MODAL DE ERRO -->
  <div id="modalErro" class="modalErro hidden">
    <div class="modalContent">

      <!-- LOGO -->
      <div class="modalLogo">
        <img src="../dist/Imagem/LogoTipo.png" alt="Logo do sistema">
      </div>

      <div class="modalHeader">
        <h3>Aten√ß√£o</h3>
        <span id="fecharModalErro" class="fecharModal">&times;</span>
      </div>

      <div class="modalBody">
        <p id="mensagemErro"></p>
      </div>

      <div class="modalFooter">
        <button id="btnOkErro" class="btnOk">OK</button>
      </div>

    </div>
  </div>

 <div id="modalAdicionarPedidoModal" class="modal-overlay" style="display:none;">
  <div class="modal-box">
    <span class="close-modal" id="fecharModalAdicionarPedidoModal">&times;</span>
    <h2>Adicionar Pedido</h2>
    <p>Digite o nome do cliente:</p>
    <input type="text" id="inputNomeClienteModal" placeholder="Nome do cliente">
    <button id="btnConfirmarClienteModal">Confirmar</button>

    <!-- NOVO: √Årea de adicionar pedidos quando houver comanda aberta -->
    <div id="adicionarPedidosContainer" style="display:none; margin-top: 20px;">
  <h3>Comanda Aberta - Adicionar Novos Pedidos</h3>
  <p>Insira os produtos que o cliente deseja adicionar √† comanda j√° existente.</p>
  
  <input type="text" id="inputNovoPedido" placeholder="Nome do produto">
  <input type="number" id="inputQuantidadePedido" placeholder="Quantidade" min="1" value="1">
  <button id="btnAdicionarPedido">Adicionar</button>

  <ul id="listaPedidos"></ul>
</div>

  </div>
</div>

<!-- Modal de mensagem -->

  <!-- Modal de mensagem -->
<div id="modalMensagem" style="
      display: none; /* n√£o aparece inicialmente */
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 99999;
  ">
  <div class="modal-box" style="
        max-width: 400px;
        width: 90%;
        text-align: center;
        padding: 20px;
        position: relative;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  ">
    <span class="close-modal" id="fecharModalMensagem" style="
        position: absolute;
        top: 10px;
        right: 15px;
        cursor: pointer;
        font-size: 20px;
        background: transparent;
        border: none;
    ">&times;</span>

    <p id="textoModalMensagem" style="
        font-size: 16px;
        margin-bottom: 20px;
    "></p>

    <button id="btnOkModalMensagem" style="
        padding: 8px 16px;
        background-color: #004691;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    ">OK</button>
  </div>
</div>


  <!-- =============================
 MODAL MESA J√Å ATENDIDA
============================= -->
<div id="modalMesaAtendida" class="modal-overlay">

  <div class="modal-conteudo">

    <div class="modal-icone">
      ‚ö†Ô∏è
    </div>

    <h2 class="modal-titulo">Mesa j√° atendida</h2>

    <p id="textoMesaAtendida" class="modal-texto"></p>

    <button id="btnFecharMesaAtendida" class="btn-modal">
      Entendi
    </button>

  </div>

</div>


<!-- MODAL PARA INSERIR NOME DO CLIENTE -->
<div id="modalGerarComanda" class="comanda-modal-overlay hidden">
  <div class="comanda-modal-card">
    
    <!-- IMAGEM/LOGO -->
    <div class="comanda-modal-logo">
      <img src="../dist/Imagem/LogoTipo.png" alt="Logo do Sistema">
    </div>

    <!-- TITULO E SUBTITULO -->
    <div class="comanda-modal-header">
      <h2>Nome do Cliente</h2>
      <p>Informe o nome do cliente para gerar a comanda</p>
    </div>

    <!-- INPUT -->
    <div class="comanda-modal-body">
      <input type="text" id="nomeClienteInput" placeholder="Ex: Jo√£o Silva" />
    </div>

    <!-- BOTOES -->
    <div class="comanda-modal-footer">
      <button id="btnCancelarCliente" class="comanda-btn-secondary">Cancelar</button>
      <button id="btnConfirmarCliente" class="comanda-btn-primary">Confirmar</button>
    </div>

    <!-- FECHAR MODAL PEQUENO NO TOPO -->
    <span id="btnFecharModalCliente" class="comanda-close">&times;</span>
  </div>
</div>

<!-- MODAL COMANDAS -->
<div id="modalComandas" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2>Comandas</h2>
    <p>Digite o nome do cliente para buscar a comanda:</p>

    <div class="modal-busca">
      <input type="text" id="inputCliente" placeholder="Nome do cliente">
      <button id="btnPesquisarCliente">Pesquisar</button>
    </div>

    <div id="resultadoComanda" class="resultado-comanda">
      <!-- Aqui ser√° exibida a comanda encontrada -->
    </div>
  </div>
</div>

<!-- ===============================
MODAL ADICIONAR PRODUTOS
=============================== -->
<div id="modalAdicionarProdutos" style="display:none;">
  <div class="modal-box">
    <button class="close-modal" id="btnFecharProdutos">&times;</button>

    <h2>Adicionar Produtos</h2>
    <div id="listaProdutos"></div>
    <input type="text" id="inputNovoProduto" placeholder="Digite o nome do produto" />
    <button id="btnAdicionarProduto">Adicionar Produto</button>
  </div>
</div>






<!-- MODAL GAR√áOM / CONEX√ÉO -->
<div id="modalGarcomMaintenance" class="modal-manutencao">
  <div class="modal-box">
    <!-- Spinner -->
    <div id="spinnerGarcom" class="spinner mb-4"></div>

    <h2 id="modalGarcomTitle">Conectando ao servidor...</h2>
    <p id="modalGarcomMsg">Aguarde enquanto verificamos a conex√£o.</p>
  </div>
</div>


  <div id="tutorialPainel" class="tutorial hidden">
  <div class="tutorial-box animate-in">

    <div class="tutorial-header">
      <span class="tutorial-icon">üçΩÔ∏è</span>
      <h2>Bem-vindo ao Painel do Gar√ßom</h2>
      <p>Veja rapidamente como usar o sistema</p>
    </div>

    <div class="tutorial-content">
      <div class="tutorial-item">
        <span>üìã</span>
        <p>Mesas aguardando atendimento aparecem automaticamente</p>
      </div>

      <div class="tutorial-item">
        <span>ü™ë</span>
        <p>Selecione uma mesa para iniciar o atendimento</p>
      </div>

      <div class="tutorial-item">
        <span>üçΩÔ∏è</span>
        <p>Adicione produtos e envie o pedido</p>
      </div>

      <div class="tutorial-item">
        <span>‚è±Ô∏è</span>
        <p>Mesas s√£o liberadas automaticamente ap√≥s inatividade</p>
      </div>
    </div>

    <button id="btnFecharTutorial" class="btn-primary">
      Come√ßar atendimento üöÄ
    </button>

  </div>
</div>

  <!-- RODAP√â FIXO -->
  <footer class="rodape">
    Desenvolvido por <strong>DM DESIGN GR√ÅFICO</strong>
  </footer>

  <!-- √ÅUDIO -->
 
  
  <!-- JS -->
  <script type="module" src="painelgargon.js"></script>

</body>
</html>
